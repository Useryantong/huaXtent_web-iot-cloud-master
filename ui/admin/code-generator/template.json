[{"name":"IOT CRUD","comment":"通用增删改查全套生成","id":"iot","script":"//此代码将在初始化配置时执行。用于自定义函数，在模板中调用！\n\nwindow.dataTypeData=[\n    {\"id\":\"VARCHAR\",\"javaType\":\"String\"},\n    {\"id\":\"TINYINT\",\"javaType\":\"Byte\"},\n    {\"id\":\"TIMESTAMP\",\"javaType\":\"java.util.Date\"},\n    {\"id\":\"CLOB\",\"javaType\":\"String\"},\n    {\"id\":\"DECIMAL\",\"javaType\":\"Long\"},\n    {\"id\":\"NUMERIC\",\"javaType\":\"Double\"},\n    {\"id\":\"DATE\",\"javaType\":\"Date\"}\n    ];\nwindow.trueOrFalse=[\n    {\"id\":\"true\",\"text\":\"是\"},\n    {\"id\":\"false\",\"text\":\"否\"}\n    ]\nvar mapping = {};\n$(window.dataTypeData).each(function(){\n    mapping[this.id]=this.javaType;\n});\nwindow.getJavaType=function(dataType){\n    return mapping[dataType.toUpperCase()];\n}","tables":[{"name":"实体类","var":"properties","type":"grid","columns":[{"name":"column","title":"新建列","header":"列名","expanded":false,"_level":0},{"name":"name","title":"新建列","header":"属性名","expanded":false,"_level":0},{"name":"dataType","title":"新建列","header":"数据类型","editor":"{\"textField\":\"id\",\"type\":\"combobox\",\"data\":\"dataTypeData\"}","expanded":false,"_level":0},{"name":"javaType","title":"新建列","header":"java类型","renderer":"if(!value&&row.dataType){row.javaType=getJavaType(row.dataType) ;console.log(row.javaType)}return row.javaType;","expanded":false,"_level":0},{"name":"comment","title":"新建列","header":"说明","expanded":false,"_level":0},{"name":"search","title":"新建列","_level":0,"header":"查询条件","editor":"{\"type\":\"combobox\",\"data\":\"trueOrFalse\"}","expanded":false,"renderer":"if(typeof value==='undefined'){row.search='true'} return row.search=='true'?\"是\":\"否\""},{"name":"list","title":"新建列","_level":0,"header":"列表展示","editor":"{\"type\":\"combobox\",\"data\":\"trueOrFalse\"}","expanded":false,"renderer":"if(typeof value==='undefined'){row.list='true'} return row.list=='true'?\"是\":\"否\""}],"_id":18,"_uid":18}],"vars":[{"var":"groupId","name":"groupId","expanded":false,"_level":0,"pid":-1,"editor":"","_id":19,"_uid":19,"_pid":-1},{"var":"version","name":"version","expanded":false,"_level":0,"pid":-1,"_id":20,"_uid":20,"_pid":-1},{"var":"parentModule","name":"父maven模块","expanded":false,"_level":0,"pid":-1,"children":[],"_id":21,"_uid":21,"_pid":-1},{"name":"maven模块名称","var":"moduleFile","expanded":false,"_level":0,"children":[],"_id":22,"_uid":22,"_pid":-1},{"name":"包名","var":"packageName","expanded":false,"_level":0,"children":[],"pid":-1,"_id":23,"_uid":23,"_pid":-1},{"var":"module","name":"模块","expanded":false,"_level":0,"pid":-1,"_id":24,"_uid":24,"_pid":-1},{"var":"tableName","name":"表名","_level":0,"pid":-1,"expanded":false,"_id":25,"_uid":25,"_pid":-1},{"name":"类名","var":"entityName","expanded":false,"_level":0,"pid":-1,"children":[],"_id":26,"_uid":26,"_pid":-1},{"var":"requestMapping","name":"请求路径","expanded":false,"_level":0,"_id":27,"_uid":27,"_pid":-1},{"var":"permission","name":"权限ID","expanded":false,"_level":0,"children":[],"_id":28,"_uid":28,"_pid":-1},{"name":"说明","var":"comment","expanded":false,"_level":0,"pid":-1,"children":[],"_id":29,"_uid":29,"_pid":-1},{"var":"api_comment","name":"API-接口说明","_level":0,"expanded":false,"_id":30,"_uid":30,"_pid":-1}],"templates":[{"name":"module","file":"{{moduleFile}}","type":"dir","children":[{"name":"src/main","file":"src/main","type":"dir","_level":1,"parentId":5,"repeat":"ignore","children":[{"name":"java","file":"java","type":"dir","_level":2,"repeat":"ignore","children":[{"name":"{{packageName}}","file":"{{$imports.string.package2path(packageName)}}/{{module}}","type":"dir","_level":3,"repeat":"ignore","children":[{"name":"web","file":"web","type":"dir","_level":4,"repeat":"ignore","children":[{"name":"Controller.java","file":"{{entityName}}Controller.java","type":"file","template":"package {{packageName}}.{{module}}.web;\n\nimport io.swagger.annotations.Api;\nimport org.hswebframework.web.authorization.annotation.Authorize;\nimport org.hswebframework.web.commons.entity.param.QueryParamEntity;\nimport org.hswebframework.web.controller.SimpleGenericEntityController;\nimport {{packageName}}.{{module}}.dao.entity.{{entityName}}Entity;\nimport {{packageName}}.{{module}}.service.{{entityName}}Service;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n/**\n * {{comment}}\n * @author hsweb-generator3.0\n */\n@RestController\n@RequestMapping(\"{{requestMapping}}\")\n@Authorize(permission = \"{{permission}}\",description=\"{{comment}}\")\n@Api(tags = \"{{api_comment}}\",value=\"{{comment}}\")\npublic class {{entityName}}Controller implements SimpleGenericEntityController<{{entityName}}Entity, Long, QueryParamEntity> {\n\n    @Autowired\n    private {{entityName}}Service {{$imports.string.lowFirst(entityName)}}Service;\n  \n    @Override\n    public {{entityName}}Service getService() {\n        return {{$imports.string.lowFirst(entityName)}}Service;\n    }\n}\n","_level":5,"repeat":"ignore","expanded":true,"_id":6,"_uid":6,"_pid":5}],"expanded":true,"_id":5,"_uid":5,"_pid":4},{"name":"service","file":"service","type":"dir","_level":4,"repeat":"ignore","children":[{"name":"Service.java","file":"{{entityName}}Service.java","type":"file","template":"package {{packageName}}.{{module}}.service;\n\nimport {{packageName}}.{{module}}.dao.entity.{{entityName}}Entity;\nimport org.hswebframework.web.service.CrudService;\n\n/**\n * {{comment}}\n *\n * @author hsweb-generator 3.0\n */\npublic interface {{entityName}}Service extends CrudService<{{entityName}}Entity, Long> {\n\n}\n","_level":5,"repeat":"ignore","expanded":true,"_id":8,"_uid":8,"_pid":7},{"name":"impl","file":"impl","type":"dir","_level":5,"repeat":"ignore","children":[{"name":"ServiceImpl.java","file":"Local{{entityName}}ServiceImpl.java","type":"file","template":"package {{packageName}}.{{module}}.service.impl;\n\nimport {{packageName}}.{{module}}.dao.{{entityName}}Dao;\nimport {{packageName}}.{{module}}.dao.entity.{{entityName}}Entity;\nimport {{packageName}}.{{module}}.service.{{entityName}}Service;\nimport org.hswebframework.web.service.GenericEntityService;\nimport org.hswebframework.web.id.IDGenerator;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\n/**\n * 默认的服务实现\n *\n * @author hsweb-generator3.0\n */\n@Service(\"{{$imports.string.lowFirst(entityName)}}Service\")\npublic class Local{{entityName}}ServiceImpl extends GenericEntityService<{{entityName}}Entity, Long>\n        implements {{entityName}}Service {\n            \n    @Autowired\n    private {{entityName}}Dao {{$imports.string.lowFirst(entityName)}}Dao;\n    \n    @Override\n    protected IDGenerator<Long> getIDGenerator() {\n        return IDGenerator.SNOW_FLAKE;\n    }\n    @Override\n    public {{entityName}}Dao getDao() {\n        return {{$imports.string.lowFirst(entityName)}}Dao;\n    }\n\n}\n","_level":6,"repeat":"ignore","expanded":true,"_id":10,"_uid":10,"_pid":9}],"expanded":true,"_id":9,"_uid":9,"_pid":7}],"expanded":true,"_id":7,"_uid":7,"_pid":4},{"name":"dao","file":"dao","type":"dir","_level":4,"repeat":"ignore","children":[{"name":"Dao.java","file":"{{entityName}}Dao.java","type":"file","template":"package {{packageName}}.{{module}}.dao;\n\nimport org.hswebframework.web.dao.CrudDao;\nimport {{packageName}}.{{module}}.dao.entity.{{entityName}}Entity;\n\n/**\n*  {{comment}}\n*  @author hsweb-generator3.0\n */\npublic interface {{entityName}}Dao extends CrudDao<{{entityName}}Entity,Long> {\n}\n","_level":5,"repeat":"ignore","expanded":true,"_id":12,"_uid":12,"_pid":11},{"name":"entity","file":"entity","type":"dir","_level":5,"repeat":"ignore","children":[{"name":"Entity.java","file":"{{entityName}}Entity.java","type":"file","template":"package {{packageName}}.{{module}}.dao.entity;\nimport org.hswebframework.web.commons.entity.GenericEntity;\nimport org.hswebframework.web.commons.entity.CloneableEntity;\nimport io.swagger.annotations.ApiModel;\nimport io.swagger.annotations.ApiModelProperty;\nimport lombok.*;\nimport javax.persistence.*;\nimport java.util.List;\n\n/**\n* {{comment}}\n* @author hsweb-generator3.0\n*/\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\n@Builder\n@Table\n@ApiModel(description = \"{{comment}}\")\npublic class {{entityName}}Entity implements GenericEntity<Long> {\n    {{each properties property i}}{{if property.name!='id'}}\n    @Column(name = \"{{property.column}}\"){{/if}}{{if property.name=='id'}}\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY){{/if}}\n    @ApiModelProperty(value = \"{{property.comment}}\")\n    private {{property.javaType}} {{property.name}};\n    {{/each}}\n    \n    @Override\n    @SneakyThrows\n    public {{entityName}}Entity clone() {\n        return ({{entityName}}Entity)super.clone();\n    }\n}","_level":6,"repeat":"replace","expanded":true,"_id":14,"_uid":14,"_pid":13}],"expanded":true,"_id":13,"_uid":13,"_pid":11}],"expanded":true,"_id":11,"_uid":11,"_pid":4}],"expanded":true,"parentId":50,"_id":4,"_uid":4,"_pid":3}],"expanded":true,"_id":3,"_uid":3,"_pid":2},{"name":"resources","file":"resources","type":"dir","_level":2,"children":[{"name":"mappers","file":"{{$imports.string.package2path(packageName)}}/{{module}}/dao/mappers/{{module}}","type":"dir","_level":3,"repeat":"ignore","children":[{"name":"Mapper.xml","file":"{{entityName}}Mapper.xml","type":"file","template":"<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://www.mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"{{packageName}}.{{module}}.dao.{{entityName}}Dao\">\n    <resultMap id=\"{{entityName}}EntityResultMap\" type=\"{{packageName}}.{{module}}.dao.entity.{{entityName}}Entity\">\n    {{each properties property i}}{{if property.name=='id'}}\n        <id property=\"id\" column=\"id\" javaType=\"Long\" jdbcType=\"BIGINT\"/>{{/if}}{{/each}}\n    </resultMap>\n\n    <!--用于动态生成sql所需的配置-->\n    <sql id=\"config\">\n        <bind name=\"resultMapId\" value=\"'{{entityName}}EntityResultMap'\"/>\n        <bind name=\"tableName\" value=\"'{{tableName}}'\"/>\n    </sql>\n  \n    <insert id=\"insert\" parameterType=\"{{packageName}}.{{module}}.dao.entity.{{entityName}}Entity\" >\n        <include refid=\"config\"/>\n        <include refid=\"BasicMapper.buildInsertSql\"/>\n    </insert>\n\n    <delete id=\"deleteByPk\" parameterType=\"String\">\n        delete from {{tableName}} where id =#{id}\n    </delete>\n\n    <delete id=\"delete\" parameterType=\"org.hswebframework.web.commons.entity.Entity\">\n        <include refid=\"config\"/>\n        <include refid=\"BasicMapper.buildDeleteSql\"/>\n    </delete>\n\n    <update id=\"update\" parameterType=\"org.hswebframework.web.commons.entity.Entity\">\n        <include refid=\"config\"/>\n        <include refid=\"BasicMapper.buildUpdateSql\"/>\n    </update>\n\n    <select id=\"query\" parameterType=\"org.hswebframework.web.commons.entity.Entity\" resultMap=\"{{entityName}}EntityResultMap\">\n        <include refid=\"config\"/>\n        <include refid=\"BasicMapper.buildSelectSql\"/>\n    </select>\n\n    <select id=\"count\" parameterType=\"org.hswebframework.web.commons.entity.Entity\" resultType=\"int\">\n        <include refid=\"config\"/>\n        <include refid=\"BasicMapper.buildTotalSql\"/>\n    </select>\n</mapper>\n","_level":4,"repeat":"replace","expanded":true,"_id":17,"_uid":17,"_pid":16}],"expanded":true,"_id":16,"_uid":16,"_pid":15}],"repeat":"ignore","expanded":true,"_id":15,"_uid":15,"_pid":2}],"expanded":true,"_id":2,"_uid":2,"_pid":1}],"expanded":true,"_level":0,"repeat":"ignore","_id":1,"_uid":1,"_pid":-1}]}]